#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
#include<stack>
#include<string>
using namespace std;


int main() {
    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   
    std::string txt;
    std::string arg;
    int c;
    std::stack<std::string> st;
    
    std::cin >> c;
    while (std::cin >> c) {
        switch (c) {
            case 1:
                std::cin >> arg;
                st.push(txt);
                text.append(arg);
                break;
            case 2: 
                std::cin >> c;
                st.push(txt);
                text.erase(txt.length() - c);
                break;
            case 3:
                std::cin >> c;
                std::cout << txt[c - 1] << '\n';
                break;
            case 4:
                txt = std::move(st.top());
                st.pop();
                break;
        }        
    }
    
      
    return 0;
}
